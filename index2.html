<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nearbys</title>
<link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
<link rel="stylesheet" href="https://order-1ib.pages.dev/new.css">
<link rel="stylesheet" href="https://nearbys.pages.dev/welcome.css">         
</head>
<body>
<!-- ########################## -->
<!-- ########################## -->
<div id="welcome">  
    <div class="welcome-container">   
        <!-- Title -->  
        <div class="top-center">  
            <h1 style="font-family: 'Righteous', cursive; font-style: italic;">          
                <span class="medium">nearby</span><span class="small">s</span>  
            </h1>  
        </div>  

        <!-- Subtitle -->  
        <p class="subtitle">Your nearest stores in one tap</p>  

        <!-- Slider -->  
        <div class="slider-container">  
            <div class="slides">  
                <div class="slide active">  
                    <p class="slide-text">connecting stores around you !</p> 
                    <img style="width:100%; margin-left:20px; margin-top:20px;" src="https://i.postimg.cc/J0yhKTLX/1000085352.webp" alt="Stores">                       
                </div> 
                <div class="slide">  
                    <p class="slide-text">Support local stores !</p>  
                    <img src="https://i.postimg.cc/d0tLzzB8/1000084848.webp" alt="Stores">  
                </div>  
                <div class="slide">  
                    <p class="slide-text">skip Bikes, reduce road chaos !</p>  
                    <img src="https://i.postimg.cc/4dFWr1KZ/1000085356.webp" alt="Groceries">  
                </div>  
                <div class="slide">  
                    <p class="slide-text">Cash/Card on delivery !</p>  
                    <img src="https://i.postimg.cc/nh2Z7MJJ/1000084826.webp" alt="Food Delivery">  
                </div>  
                <div class="slide">  
                    <p class="slide-text">Less packaging, <span style="color:#009500;">go GREEN </span>!</p>  
                    <img style="width:70%; margin-top:20px;" src="https://i.postimg.cc/52DB19Xw/1000084839.webp" alt="Fashion">  
                </div>  
            </div>  
        </div>    

        <!-- Install Button -->  
                  
<div style="margin-top:15px;">
<p style="font-size:12px; margin-bottom:-10px;">Install the App ( size: 1 MB )</p>      
<button id="install-button" style="display: none; background: #009500; color: white; font-weight: bold;font-size: 16px; padding: 10px 20px; border: none; border-radius: 10px;cursor: pointer; text-align: center; display: block; margin: 20px auto; box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);">
  Install App
</button>
</div>              

        <!-- Footer -->  
        <div class="footer2">  
            <a href="https://nearbys.online" target="_blank">  
                <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000080716.webp?v=1742540723" alt="Nearbys Logo">  
            </a>  
            <a style="text-shadow: -0.5px -0.5px 0 #000, 0.5px -0.5px 0 #000, -0.5px 0px 0 #000, 0.5px 0.5px 0 #000;" href="mailto:admin@nearbys.online">  
                <i class="fas fa-envelope"></i> Email  
            </a>  
            <a style="text-shadow: -0.5px -0.5px 0 #000, 0.5px -0.5px 0 #000, -0.5px 0px 0 #000, 0.5px 0.5px 0 #000;" href="https://wa.me/971509880960">  
                <i class="fab fa-whatsapp"></i> WhatsApp  
            </a>  
        </div>    

        <!-- Slider Script -->  
        <script>  
            let index = 0;
const slides = document.querySelectorAll(".slide");
const totalSlides = slides.length;

function showSlide() {
    slides.forEach(slide => slide.classList.remove("active"));
    slides[index].classList.add("active");

    let delay = index === 0 ? 4000 : 3000; // 1st slide: 4 seconds, others: 3 seconds
    index = (index + 1) % totalSlides;

    setTimeout(showSlide, delay);
}

showSlide();  
        </script>  
    </div>  
</div>
<!-- ########################## -->
<!-- ########################## -->
<!-- Main Content (Hidden initially) -->
    <div id="main-content">


  
<div class="header">
    <a href="https://nearbys.online" style="margin-right: 10px;">
     <h1 style="font-family: 'Righteous', cursive;">        
        <span class="medium">nearby</span>
        <span class="small">s</span>
    </h1>
    </a>    
    <div class="replaceable-text" onclick="showLocationPopup()" style="margin-right: 10px; margin-top:5px; cursor: pointer;">
    Change Location
   </div>
   <div class="icon-container" onclick="showLocationPopup()" style="cursor: pointer; margin-top:10px; margin-right:-1px;">
    <i class="fa-solid fa-rotate" style="color: #009500;"></i>
   </div>
<!-- xxxxxxxxxxxxxxxxxxx -->
<div style="margin-top:120px; padding:10px 0; display: flex; background: #fff; gap: 20px; position: fixed; overflow-y: hidden; width: 100%; height: 60px; justify-content: center; z-index: 10; font-family: 'Righteous', cursive;">
<div class="cardz" style="box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);" onclick="closePopup()">        
    <p>select items</p>
    </div>    
<div class="cardz" style="background:#009500; box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);" onclick="showStores('stores')">
    <p style="color:white;">Stores Nearby</p>
</div>
</div>
    </div>
<!-- xxxxxxxxxxxxxxxxxxxx -->
       </div>    
<!-- xxxxxxxxxxxxxxxxxxxx -->  
<div class="location-container">    
    <div class="locationPopup" id="locationPopup">
        <a href="#" onclick="setCurrentLocation()">Current Location</a>
        <a href="#" id="loc1">
            <span onclick="setLocationFromStorage('loc1')">Save Location 01</span>
            <span onclick="openRenamePopup('loc1')"><i class="fa-solid fa-rotate" style="color:#009500;"></i></span>
        </a>
        <a href="#" id="loc2">
            <span onclick="setLocationFromStorage('loc2')">Save Location 02</span>
            <span onclick="openRenamePopup('loc2')"><i class="fa-solid fa-rotate" style="color:#009500;"></i></span>
        </a>
        <a href="#" id="loc3">
            <span onclick="setLocationFromStorage('loc3')">Save Location 03</span>
            <span onclick="openRenamePopup('loc3')"><i class="fa-solid fa-rotate" style="color:#009500;"></i></span>
        </a>
        <a href="#" id="loc4">
            <span onclick="setLocationFromStorage('loc4')">Save Location 04</span>
            <span onclick="openRenamePopup('loc4')"><i class="fa-solid fa-rotate" style="color:#009500;"></i></span>
        </a>
        <a href="#" id="loc5">
            <span onclick="setLocationFromStorage('loc5')">Save Location 05</span>
            <span onclick="openRenamePopup('loc5')"><i class="fa-solid fa-rotate" style="color:#009500;"></i></span>
        </a>
    </div>
</div>

<!-- Rename Location Modal -->
<div class="overlay" id="overlay"></div>
<div class="modal" id="renameModal">
    <p>Save Location</p>
    <input type="text" id="renameInput" placeholder="Enter new name">
    <div class="btn-group">
        <button class="btn cancel" onclick="closeRenamePopup()">Cancel</button>
        <button class="btn save" onclick="saveRename()">Save</button>
    </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner">
        <div class="spinner"></div>
        <div id="countdown">Receiving location 30 seconds</div>
    </div>
</div>
  
<!-- Error Popup -->
<div class="bottom-popup" id="errorPopup">
    <p>Please turn ON the location</p>
    <button onclick="closeErrorPopup()">OK</button>
</div>
<!-- select location -->
<div class="bottom-popup" id="selectLocationPopup">
    <p>Please select the location</p>
</div>  
<!-- item not available  -->    
    <div class="bottom-popup" id="noItemPopup">
        <p><strong>Sorry!</strong><br><br>The selected item is not available nearby.</p><br>        
   <button onclick="closeNoItemPopup()">OK</button>
    </div>         
<!-- xxxxxxxxxxxxxxxxxxxxxxx -->
<!-- xxxxxxxxxxxxxxxxxxxxxxx -->
<div class="section-title" style="margin-top:120px;"><p>Grocery</p>
</div>
<div id="categories" class="item-grid" style="margin-top:0px; margin-bottom: 10px; font-family: 'Righteous', cursive;">
                  <!--  -->                                                     
<div class="cardx" onclick="showItems('vegetables')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072235.webp?v=1738386080" alt="Vegetables">
        <p>Vegetables</p>
</div>
    
<div class="cardx" onclick="showItems('fruits')">
       <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072237.webp?v=1738385978" alt="Fruits">
       <p>Fruits</p>
</div>
    
<div class="cardx" onclick="showItems('meat')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072170.webp?v=1738385944" alt="Meat">
        <p>Meat & Seafood</p>
</div>  

<div class="cardx" onclick="showItems('bakery')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072169.webp?v=1738385927" alt="Bakery">
        <p>Bakery & Spreads</p>
    </div>

<div class="cardx" onclick="showItems('oils')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072175.webp?v=1738385868" alt="Oils">
        <p>Oils & Season</p>
    </div>

<div class="cardx" onclick="showItems('spices')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072183.webp?v=1738386023" alt="Spices">
        <p>Spices</p>
    </div>

<div class="cardx" onclick="showItems('beverages')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072229.webp?v=1738385955" alt="Beverages">
        <p>Beverages</p>
    </div>

<div class="cardx" onclick="showItems('eggs')">
        <img src="https://i.postimg.cc/FK4v3GYt/1000083470.webp" alt="Eggs">
        <p>Eggs & Dairy</p>
    </div>

<div class="cardx" onclick="showItems('ready to cook')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072181.webp?v=1738386054" alt="Ready to cook">
        <p>Ready to cook</p>
    </div>

<div class="cardx" onclick="showItems('snacks')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072182.webp?v=1738385890" alt="Snacks">
        <p>Snacks & Sweets</p>
    </div>

<div class="cardx" onclick="showItems('rice & grains')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072172.webp?v=1738385935" alt="Rice & Grains">
        <p>Rice & Grains</p>
    </div>

<div class="cardx" onclick="showItems('delicatessen')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072171.webp?v=1738386062" alt="Delicatessen">
        <p>Delicatessen</p>
    </div>

<div class="cardx" onclick="showItems('nuts')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072255.webp?v=1738386004" alt="Nuts">
        <p>Nuts</p>
    </div>

<div class="cardx" onclick="showItems('frozen')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072174.webp?v=1738386033" alt="Frozen">
        <p>Frozen & Can</p>
    </div>

<div class="cardx" onclick="showItems('tea')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072177.webp?v=1738385962" alt="Tea & coffee">
        <p>Tea & coffee</p>
    </div>

<div class="cardx" onclick="showItems('babies')">
        <img src="https://i.postimg.cc/d1LkG25F/Baby.webp" alt="Babies">
        <p>Babies</p>
    </div>           
           
<div class="cardx" onclick="showItems('home')">
        <img src="https://i.postimg.cc/DZRpnztQ/1741785735385.png" alt="Home">
        <p>Home</p>
</div>                              
                 </div>
<!-- xxxxxxxxxxxxxxxxxxxxxx --> 
<div class="section-title"><p>Health & Beauty</p></div>

<div id="categories" class="item-grid" style="margin-bottom: 30px;"> 

<div class="cardx" onclick="showItems('beauty')">
        <img src="https://i.postimg.cc/WbQGTqHY/1000083458.webp" alt="Beauty">
        <p>Beauty</p>
    </div>

<div class="cardx" onclick="showItems('personal')">
        <img src="https://i.postimg.cc/4dKZvT1q/1741751904759.png" alt="Personal care">
        <p>Personal care</p>
</div>

<div class="cardx" onclick="showItems('fitness')">
        <img src="https://i.postimg.cc/3wByzkGq/1000083468.webp" alt="Fitness">
        <p>Fitness</p>
    </div> 
                </div>
<!-- xxxxxxxxxxxxxxxxxxxxxx -->  
<div class="section-title"><p>Food</p>
</div>

<div id="categories" class="item-grid" style="margin-bottom: 30px;">   

<div class="cardx" onclick="showItems('cafeteria')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072168.webp?v=1738385898" alt="Cafeteria">
        <p>Cafeteria</p>
    </div>

<div class="cardx" onclick="showItems('restaurant')">
        <img src="https://cdn.shopify.com/s/files/1/0664/3751/3414/files/1000072167.webp?v=1738386042" alt="Restaurants">
        <p>Restaurants</p>
    </div>

<div class="cardx" onclick="showItems('fastfood')">
        <img src="https://i.postimg.cc/hvpvt2LB/1000082732.webp" alt="Fast food">
        <p>Fast Food</p>
    </div>                                                                                                                             
               </div> 
<!-- xxxxxxxxxxxxxxxxxxxxxx -->
<div class="section-title"><p>Electronics</p>
</div>

<div id="categories" class="item-grid" style="margin-bottom: 0px;">

<div class="cardx" data-target="Laptops">
        <img src="https://i.postimg.cc/gjMyqwM8/1000083448.webp" alt="Laptops">
        <p>Laptops</p>
    </div>

    <div class="cardx" data-target="Tablets">
        <img src="https://i.postimg.cc/brYHt0Rq/1000083447.webp" alt="Tablets">
        <p>Tablets</p>
    </div>

    <div class="cardx" data-target="Mobiles">
        <img src="https://i.postimg.cc/15MPQbyC/1000082800.webp" alt="Phones">
        <p>Phones</p>
    </div> 
</div>    
<!-- xxxxxxxxxxxxxxxxxxxxxx -->  
<!-- xxxxxxxxxxxxxxxxxxxxxx -->
<div id="Mobiles" class="content-section">     </div>

<div id="Tablets" class="content-section">     </div>
       
<div id="Laptops" class="content-section">
</div>
<!-- xxxxxxxxxxxxxxxxxxxxxx -->  
<!-- xxxxxxxxxxxxxxxxxxxxxx -->       
<div id="categories" class="item-grid" style="margin-bottom: 30px;">

<div class="cardx" onclick="showItems('appliences')">
        <img src="https://i.postimg.cc/mkvVPgcf/1000084549.webp" alt="Appliences">
        <p>Appliences</p>
    </div>
    
<div class="cardx" onclick="showItems('accessories')">
        <img src="https://i.postimg.cc/tCxCGLjH/1000083779.webp" alt="Accessories">
        <p>Accessories</p>
    </div>
 
<div class="cardx" onclick="showItems('watches')">
        <img src="https://i.postimg.cc/NGNVLqPZ/1000083238.webp" alt="Watches">
        <p>Watches</p>
    </div>
</div>
                  </div>
<!-- xxxxxxxxxxxxxxxxxxxxxx -->
<div class="section-title"><p>Fashion</p>
</div>

<div id="categories" class="item-grid" style="margin-bottom: 30px;">

<div class="cardx" onclick="showItems('kids')">
        <img src="https://i.postimg.cc/SQ6kZJ3p/1000082805.webp" alt="Kids Fashion">
        <p>Kids Fashion</p>
    </div>

<div class="cardx" onclick="showItems('ladies')">
        <img src="https://i.postimg.cc/fyfskrmb/1000082803.webp" alt="Ladies Fashion">
        <p>Ladies Fashion</p>
    </div>

<div class="cardx" onclick="showItems('men')">
        <img src="https://i.postimg.cc/HkhgJ5cb/mens-fashion-tips-casual-510x1024.webp" alt="Men Fashion">
        <p>Men Fashion</p>
    </div>

<div class="cardx" onclick="showItems('shoes')">
        <img src="https://i.postimg.cc/kGhhHKb7/1000083239.webp" alt="Shoes">
        <p>Shoes</p>
    </div>

<div class="cardx" onclick="showItems('bags')">
        <img src="https://i.postimg.cc/jjd3RM4R/1000083246.webp" alt="Bags">
        <p>Bags</p>
    </div>

<div class="cardx" onclick="showItems('glasses')">
        <img src="https://i.postimg.cc/NGNVLqPZ/1000083238.webp" alt="Glasses">
        <p>Glasses</p>
    </div>
                  </div>                                                                              
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<!-- xxxxxxxxxxxxxxxxxxxxxx --> 
<!-- items Popup -->      
    <div id="itemPopup" class="popup" style="font-family: 'Righteous', cursive;">        
 <div id="itemList"></div></div>                        
<!-- stores Popup -->
    <div id="storesPopup" class="popup" style="font-family: 'Righteous', cursive;">        
 <div id="storesList"></div></div>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<script src="https://order-1ib.pages.dev/categories.js"></script>
<script src="https://order-1ib.pages.dev/let-vendors.js"></script>
<script src="https://order-1ib.pages.dev/coordinates.js"></script>
<script src="https://order-1ib.pages.dev/new.js"></script>
<script src="https://order-1ib.pages.dev/new2.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const welcomeScreen = document.getElementById("welcome");
    const mainContent = document.getElementById("main-content");
    const now = new Date().getTime();
    const lastVisit = localStorage.getItem("lastVisit");

    function showMainContent() {
        welcomeScreen.style.display = "none";
        mainContent.style.display = "block";
    }

    // Check if running as a PWA
    const isPWA = window.matchMedia("(display-mode: standalone)").matches || window.navigator.standalone;

    if (isPWA || (lastVisit && now - lastVisit < 24 * 60 * 60 * 1000)) {  
        // Skip welcome screen if PWA or revisited within 24 hours
        showMainContent();
    } else {
        // Show welcome screen for 20 seconds, then hide
        welcomeScreen.style.display = "block";
        mainContent.style.display = "none";

        setTimeout(() => {
            showMainContent();
            localStorage.setItem("lastVisit", now);
        }, 20000);
    }
});
</script>
<script>
// When the back button is pressed
window.addEventListener('popstate', function (e) {
    const itemPopup = document.getElementById("itemPopup");
    const storesPopup = document.getElementById("storesPopup");

    // Check if popups are open
    if (itemPopup.style.display === "block") {
        itemPopup.style.display = "none"; // Close item popup
        history.pushState(null, null, location.href); // Prevent navigation
    } else if (storesPopup.style.display === "block") {
        storesPopup.style.display = "none"; // Close stores popup
        history.pushState(null, null, location.href); // Prevent navigation
    } else if (window.location.href === "https://nearbys.online") {
        history.pushState(null, null, location.href); // Prevent going back from the main page
    }
});

// Function to open a popup and update the browser history state
function showItems(category) {
    fetch(categoryUrls[category])
        .then(response => {
            if (!response.ok) throw new Error('Network response was not ok');
            return response.text();
        })
        .then(data => {
            let parser = new DOMParser();
            let doc = parser.parseFromString(data, "text/html");
            let items = [];

            doc.querySelectorAll(".item-card").forEach(card => {
                let img = card.querySelector("img")?.src;
                let name = card.querySelector("p")?.textContent;
                if (img && name) items.push({ name, image: img });
            });

            let itemList = `<div class="item-grid">`;
            items.forEach(item => {
                itemList += `
                    <div class="item-card" onclick="searchItem('${item.name}')">
                        <img src="${item.image}" alt="${item.name}" loading="lazy">
                        <p>${item.name}</p>
                    </div>
                `;
            });
            itemList += `</div>`;
            document.getElementById("itemList").innerHTML = itemList;
            document.getElementById("itemPopup").style.display = "block";

            // Push state to track popup open state
            history.pushState({ popupOpen: true }, null, location.href);
        })
        .catch(error => {
            console.error("Error loading items:", error);
        });
}

// Function to open the stores popup
function showStores() {
    document.getElementById("storesPopup").style.display = "block";
    history.pushState({ popupOpen: true }, null, location.href);
}
</script>
<script>
    function showItems(category) {
    // Fetch the category data
    fetch(categoryUrls[category])
        .then(response => {
            if (!response.ok) throw new Error('Network response was not ok');
            return response.text();
        })
        .then(data => {
            let parser = new DOMParser();
            let doc = parser.parseFromString(data, "text/html");
            let items = [];

            // Parse items from the fetched HTML
            doc.querySelectorAll(".item-card").forEach(card => {
                let img = card.querySelector("img")?.src;
                let name = card.querySelector("p")?.textContent;
                if (img && name) items.push({ name, image: img });
            });

            // Generate item list HTML
            let itemList = `<div class="item-grid">`;
            items.forEach(item => {
                itemList += `
                    <div class="item-card" onclick="searchItem('${item.name}')">
                        <img src="${item.image}" alt="${item.name}" loading="lazy">
                        <p>${item.name}</p>
                    </div>
                `;
            });
            itemList += `</div>`;
            
            // Update the item list in the DOM
            document.getElementById("itemList").innerHTML = itemList;
            document.getElementById("itemPopup").style.display = "block";
        })
        .catch(error => {
            console.error("Error loading items:", error);

            // Dynamically create and display the error popup
            let noItemPopup = document.getElementById("noItemPopup");
            
            if (!noItemPopup) {
                noItemPopup = document.createElement("div");
                noItemPopup.className = "bottom-popup";
                noItemPopup.id = "noItemPopup";
                noItemPopup.innerHTML = `
                    <p><strong>Sorry!</strong><br><br>The selected item is not available nearby.</p><br>
                    <button onclick="closeNoItemPopup()">OK</button>
                `;
                document.body.appendChild(noItemPopup);
            }

            // Reset and show the popup
            noItemPopup.style.display = "block";
        });
}

// Function to close the error popup
function closeNoItemPopup() {
    let noItemPopup = document.getElementById("noItemPopup");
    if (noItemPopup) {
        noItemPopup.style.display = "none";
    }
}

</script>
</body>
</html>
